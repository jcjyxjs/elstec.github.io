---
layout: post
cid: 6
title: 利用腾讯云数据万象节省带宽，极致压缩图片
slug: tci
date: 2019/08/14 13:26:00
updated: 2019/09/12 10:32:39
status: publish
author: jcjyxjs
categories: 
  - 网站
tags: 
  - 腾讯云
  - 网站加速
  - 优化
banner: 
bannerascover: 1
bannerStyle: 0
excerpt: 优化加速
posttype: 0
showfullcontent: 0
showTOC: 0
---


目前我的博客使用`Typecho + VOID`(主题)部署在GCP香港上，访问速度不能说很慢，但是移动全线路绕美个人体验很差。之前直接套了nodecache的香港CDN，反而变成了减速器，之后又安装了魔改版BBR，腾讯TCPA加速80，443，图片懒加载并上传到腾讯云cos用国内CDN加速，但是总体速度依旧不尽人意。直接压缩成WebP并不是所有浏览器都支持，不支持的浏览器直接不显示图片，所以要让支持的浏览器加载WebP格式，不持支的浏览器加载原格式。
![webP浏览器支持度][1]
在CDN无法满足需求后，我又想到了一个更给力的方案，就是利用腾讯云对象存储(COS) + 数据万象(CI)。(腾讯云每月都有赠送免费额度，个人小站完全够用)详情:[点我][2]

> 数据万象基于对象存储提供优化服务，也可以同时使用CDN进行加速。可以按照我的步骤来，也可自行发挥。

1.创建Bucket(存储桶)
---------------
访问[数据万象控制台][3]，选择绑定Bucket，如果已经有Bucket可以直接绑定，也可以新建一个。
![ (/ω＼) ][4]
我这里就以新建一个Bucket为例，名称，所属区域自定。

> 注意访问权限需要设置成公有读私有写。CDN加速的话，如果需要绑定自定义域名，就先不要开启，如果是默认加速域名，直接开启即可。
新建完Bucket之后先不要设置防盗链等。在数据万象的Bucket管理页面，找到你新建或者绑定的Bucket，点击管理进入Bucket管理，依次点击样式→样式管理→添加样式。

2.新建处理样式
--------

> 输入样式名称，缩放方式一般选择不缩放，渐进显示看个人喜好，输出格式选择WebP，最后保存。
![ OωO ][5]

3.最终测试
------

生成结束之后，会得到如下图所示的内容。点击预览，会访问腾讯自带的测试网址。
![ |´・ω・)ノ ][6]
所有操作结束之后可以用如下格式访问:
> **[图片处理域名或图片加速域名或自定义域名]+[文件路径]+[?]+[描述]**
(描述内容详见上图)
![][7]
这是使用数据万象优化之前，1.6M大小
![][8]
这是优化之后，只有437KB
加载速度明显提升
以上全部设置完成之后可以逐一设置防盗链，原图保护等功能。这只是一个非常简单快速的部署使用，省略了很多功能的配置。



  [1]: https://cdn.elstec.cn/6-0.png?imageMogr2/format/webp/interlace/1/quality/100
  [2]: https://cloud.tencent.com/document/product/460/6970
  [3]: https://console.cloud.tencent.com/ci/bucket
  [4]: https://cdn.elstec.cn/gif/1.gif
  [5]: https://cdn.elstec.cn/gif/2.gif
  [6]: https://cdn.elstec.cn/3.png?imageMogr2/format/webp/interlace/1/quality/100
  [7]: https://cdn.elstec.cn/5.png?imageMogr2/format/webp/interlace/1/quality/100
  [8]: https://cdn.elstec.cn/4.png?imageMogr2/format/webp/interlace/1/quality/100
  