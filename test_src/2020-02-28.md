---
layout: post
title: CloudFlare自选节点
slug: cfcus
date: 2020-02-28 21:50
status: publish
author: jcjyxjs
categories:
  - CDN
tags:
  - HTTP
  - CloudFlare
  - 建站
  - 网络
  - 网站
  - CDN
excerpt: 主要还是太麻烦了
---

# 首先
1. 需要有Cloudflare Partener或使用别人的。原因很简单，因为官方只允许NS接入，CFP则可以IP/CNAME接入。这里推荐 [http://cdn.bnxb.com/](http://cdn.bnxb.com/)
2. 自选IP原理就是国内DNS解析的时候分配最快的IP然后用A记录解析到这个IP上，国外保持不变。

![](https://cdn.elstec.cn/16/1.svg)

# 实现

首先添加域名（我是用的奔牛，用什么其实原理都一样）

![](https://cdn.elstec.cn/16/2.png?imageMogr2/format/webp/interlace/1/quality/100)

然后可以在解析设置看到需要解析的地址，先CNAME解析然后等待SSL签发。默认IP直接ping这条CNAME记录就行。

![](https://cdn.elstec.cn/16/3.png?imageMogr2/format/webp/interlace/1/quality/100)

SSL签发之后，进入dns解析把CNAME解析删掉，国内根据情况分线路进行解析。境外默认分配IP就行。

# 其他

CloudFlare官方公示IP
[https://www.cloudflare.com/zh-cn/ips/](https://www.cloudflare.com/zh-cn/ips/)

### IPv4

- 173.245.48.0/20
- 103.21.244.0/22
- 103.22.200.0/22
- 103.31.4.0/22
- 141.101.64.0/18
- 108.162.192.0/18
- 190.93.240.0/20
- 188.114.96.0/20
- 197.234.240.0/22
- 198.41.128.0/17
- 162.158.0.0/15
- 104.16.0.0/12
- 172.64.0.0/13
- 131.0.72.0/22

### IPv6

- 2400:cb00::/32
- 2606:4700::/32
- 2803:f800::/32
- 2405:b500::/32
- 2405:8100::/32
- 2a06:98c0::/29
- 2c0f:f248::/32

### 百度云合作线路

- 162.159.208.4-162.159.208.103
- 162.159.209.4-162.159.209.103
- 162.159.210.4-162.159.210.103
- 162.159.211.4-162.159.211.103

其他线路网上有，百度云合作线路建议电信。